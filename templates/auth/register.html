{% extends 'layout/layout.html' %}

{% block head %}
<title>Register - AW SpectraCoatâ„¢ Studio</title>
{% endblock head %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
{% endblock styles %}

{% block body %}

<div class="form-container">
    <a href="https://adaptivewaves.com/" target="_blank">
        <img src="https://awi-three.vercel.app/AWILogo.svg" alt="AW Logo" class="h-8 w-auto">
    </a>
    <p>{% if error %}{{ error }}{% endif %}</p>

    <h1>Sign Up</h1>

    <form id="registerForm" action="{{ url_for('app.register') }}" method="post">
        <div class="input-group">
            <input type="text" name="firstName" placeholder="First Name" required>
        </div>
        <div class="input-group">
            <input type="text" name="lastName" placeholder="Last Name" required>
        </div>
        <div class="input-group">
            <input type="email" id="signUpEmail" name="signUpEmail" placeholder="Email" required>
        </div>
        <div class="input-group">
            <input type="password" name="signUpPassword" placeholder="Password" required>
        </div>
        <div class="input-group">
            <input type="password" name="confirmPassword" placeholder="Confirm Password" required>
        </div>
        <div class="input-group">
            <input type="text" name="phoneNumber" placeholder="Phone Number" required>
        </div>
        <div class="input-group">
            <input type="text" name="reason" placeholder="Reason for Using the Software" required>
        </div>

        <!-- <button type="button" id="sendOtpBtn" class="btn-primary">Send OTP</button>
            <div id="otpSection" style="display: none;">
                <div class="input-group">
                    <input type="text" id="otpInput" name="otp" placeholder="Enter OTP" required>
                </div>
                <button type="button" id="verifyOtpBtn" class="btn-primary">Verify OTP</button>
                <p id="otpMessage" style="color: red; display: none;">Invalid OTP. Please try again.</p>
            </div> -->

        <div class="checkbox-container">
            <input type="checkbox" name="terms" required>
            <label for="terms">I have read and agree to the Terms and Privacy Policy</label>
        </div>

        <button type="submit" class="btn-primary" id="registerBtn">Register</button>

        <div class="btn-container">
            <button onclick="window.location.href='/login'" class="btn-secondary">Login</button>
            <button onclick="window.location.href='/'" class="btn-secondary">Cancel</button>
        </div>
        <p class="text-link">By clicking Register, you agree to our Terms and Privacy Policy.</p>
    </form>

</div>
<div class="image-container"></div>

{% endblock body %}

{% block scripts %}
<!-- <script>
    const sendOtpBtn = document.getElementById('sendOtpBtn');
    const verifyOtpBtn = document.getElementById('verifyOtpBtn');
    const otpSection = document.getElementById('otpSection');
    const otpInput = document.getElementById('otpInput');
    const otpMessage = document.getElementById('otpMessage');
    const registerBtn = document.getElementById('registerBtn');
    const emailInput = document.getElementById('signUpEmail');

    // Handle OTP Sending
    sendOtpBtn.addEventListener('click', () => {
        const email = emailInput.value;
        if (!email) {
            alert('Please enter your email first.');
            return;
        }

        fetch('/send-otp', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
        })
            .then(response => response.json())
            .then(data => {
                if (data.message === 'OTP sent successfully') {
                    otpSection.style.display = 'block';
                    alert('OTP sent to your email!');
                } else {
                    alert(data.error || 'Failed to send OTP.');
                }
            })
            .catch(error => console.error('Error:', error));
    });

    // Handle OTP Verification
    verifyOtpBtn.addEventListener('click', () => {
        const email = emailInput.value;
        const otp = otpInput.value;

        fetch('/verify-otp', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, otp })
        })
            .then(response => response.json())
            .then(data => {
                if (data.message === 'OTP verified successfully') {
                    otpMessage.style.display = 'none';
                    registerBtn.disabled = false;
                    alert('OTP verified successfully. You can now register.');
                } else {
                    otpMessage.style.display = 'block';
                    otpMessage.textContent = data.error || 'Invalid OTP. Please try again.';
                }
            })
            .catch(error => console.error('Error:', error));
    });
</script> -->
{% endblock scripts %}